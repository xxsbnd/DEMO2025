# DEMO2025
Выполнение заданий демонстрационного экзамена специальности 09.02.06
![alt text](sources/images/image2.png)
![alt text](sources/images/image.png)
![alt text](sources/images/image3.png)
## [МОДУЛЬ 1](#решение-модуль-1)
1. Произведите базовую настройку устройствы
  - [Настройте имена устройств согласно топологии. Используйте полное доменное имя](#конфигурация-доменного-имени-и-имени-устройства)
  - [На всех устройствах необходимо сконфигурировать IPv4](#настройка-ip-адреса)
  - IP-адрес должен быть из приватного диапазона, в случае, если сеть локальная, согласно RFC1918
  - Локальная сеть в сторону HQ-SRV(VLAN100) должна вмещать не более 64 адресов
  - Локальная сеть в сторону HQ-CLI(VLAN200) должна вмещать не более 16 адресов
  - Локальная сеть в сторону BR-SRV должна вмещать не более 32 адресов
  - Локальная сеть для управления(VLAN999) должна вмещать не более 8 адресов
  - Сведения об адресах занесите в отчёт, в качестве примера используйте Таблицу 3
2. Настройка ISP
  - Настройте адресацию на интерфейсах:
      - Интерфейс, подключенный к магистральному провайдеру, получает адрес по DHCP
      - Настройте маршруты по умолчанию там, где это необходимо
      - Интерфейс, к которому подключен HQ-RTR, подключен к сети 172.16.4.0/28
      - Интерфейс, к которому подключен BR-RTR, подключен к сети 172.16.5.0/28
      - [На ISP настройте динамическую сетевую трансляцию в сторону HQ-RTR и BR-RTR для доступа к сети Интернет](#динамическая-трансляция-адресов)
3. Создание локальных учетных записей
  - Создайте пользователя sshuser на серверах HQ-SRV и BR-SRV
      - Пароль пользователя sshuser с паролем P@ssw0rd
      - Идентификатор пользователя 1010
      - Пользователь sshuser должен иметь возможность запускать sudo без дополнительной аутентификации.\
  - Создайте пользователя net_admin на маршрутизаторах HQ-RTR и BR-RTR
      - Пароль пользователя net_admin с паролем P@$$word
      - При настройке ОС на базе Linux, запускать sudo без дополнительной аутентификации
4. Настройте на интерфейсе HQ-RTR в сторону офиса HQ виртуальный коммутатор:
  - Сервер HQ-SRV должен находиться в ID VLAN 100
  - Клиент HQ-CLI в ID VLAN 200
  - Создайте подсеть управления с ID VLAN 999
  - Основные сведения о настройке коммутатора и выбора реализации разделения на VLAN занесите в отчёт
5. Настройка безопасного удаленного доступа на серверах HQ-SRV и BRSRV:
  - Для подключения используйте порт 2024
  - Разрешите подключения только пользователю sshuser
  - Ограничьте количество попыток входа до двух
  - Настройте баннер «Authorized access only»
6. Между офисами HQ и BR необходимо сконфигурировать ip туннель
  - Сведения о туннеле занесите в отчёт
  - На выбор технологии GRE
7. Обеспечьте динамическую маршрутизацию: ресурсы одного офиса должны быть доступны из другого офиса. Для обеспечения динамической маршрутизации используйте link state протокол на ваше усмотрение.
  - Разрешите выбранный протокол только на интерфейсах в ip туннеле
  - Маршрутизаторы должны делиться маршрутами только друг с другом
  - Обеспечьте защиту выбранного протокола посредством парольной защиты
  - Сведения о настройке и защите протокола занесите в отчёт
8. Настройка динамической трансляции адресов.
  - Настройте динамическую трансляцию адресов для обоих офисов.
  - Все устройства в офисах должны иметь доступ к сети Интернет
9. Настройка протокола динамической конфигурации хостов.
  - Настройте нужную подсеть
  - Для офиса HQ в качестве сервера DHCP выступает маршрутизатор HQ-RTR.
  - Клиентом является машина HQ-CLI.
  - Исключите из выдачи адрес маршрутизатора
  - Адрес шлюза по умолчанию – адрес маршрутизатора HQ-RTR
  - Адрес DNS-сервера для машины HQ-CLI – адрес сервера HQ-SRV
  - DNS-суффикс для офисов HQ – au-team.irpo
  - Сведения о настройке протокола занесите в отчёт
10. Настройка DNS для офисов HQ и BR
  - Основной DNS-сервер реализован на HQ-SRV.
  - Сервер должен обеспечивать разрешение имён в сетевые адреса устройств и обратно в соответствии с таблицей 2
  - В качестве DNS сервера пересылки используйте любой общедоступный DNS сервер
11. Настройте часовой пояс на всех устройствах, согласно месту проведения экзамена.
## РЕШЕНИЕ МОДУЛЬ 1
### конфигурация доменного имени и имени устройства
Изменяем в файле `/etc/hostname` ```<server-hostname>``` на необходимый хостнейм
В файле `/etc/hosts` меняем строчку ```127.0.1.1 <server-hostname>``` на ```127.0.1.1 <domen> <hostanme>```
Пример: 
![alt text](sources/images/image4.png)

В файле `/etc/resolv.conf` меняем строку domain на наш домен. Пример: 
![alt text](sources/images/image5.png)

### Сетевая конфигурация
Приватные сети:

От 10.0.0.0 до 10.255.255.255 

От 172.16.0.0 до 172.31.255.255 

От 192.168.0.0 до 192.168.255.255 

### Настройка ip-адреса 

В файле `/etc/network/interfaces` добавляем необходимые записи следующего вида: 

```
allow-hotplug <int>
iface <int> inet static
address <ip>
netmask <mask>
gateway <ip>
```

### Динамическая трансляция адресов

Создаем скрипт по адресу `/etc/iptables.sh`, где WAN - интерфейс в интернет

![alt text](sources/images/image6.png)

Далее прописываем ```chmod +x /etc/iptables.sh```

Дописываем в `/etc/network/interfaces` строку ```post-up iptables-restore < /etc/iptables.rules```

запускаем скрипт ```/etc/iptables.sh```

Меняем в файле `/etc/sysctl.conf` значение на ```net.ipv4.ip_forward = 1``` 

Применяем настройку командой ```sysctl -p```

### Настройка VLAN

Устанавливаем пакеты ```vlan bridge-utils```

прописываем ```modprobe 8021q``` и ```echo "8021q" | tee -a /etc/modules```

В `/etc/network/interfaces` добавляем интерфейсы для вланов 
```
auto <vlanname>
iface <vlanname> inet static
address <ip>
netmask <mask>
vlan-raw-device <int>
```

Делаем это на всех машинах участующих в vlan 

### Создание пользователя 
```
useradd -u 1010 -m -s /bin/bash sshuser
echo "sshuser:P@ssw0rd" | chpasswd
```
Добавляем пользователя в группу sudo, чтобы он мог ее использовать 

```usermod -aG sudo sshuser```

С помощью команды `visudo` добавляем строчку для использования sudo без пароля. Возможно понадобится прописать эту же строчку но ниже `%sshuser ... ...`

![alt text](sources/images/image7.png)

### Настройка ssh сервера

Установка: ```apt-get install openssh-server```

В файле issue.net меняем текст на необходимый. 

В файле /etc/ssh/sshd_config меняем строчку port на Port <port>

![alt text](sources/images/image8.png)

Изменяем эти строчки для максимального кол-ва авторизации и авторизации только для определенных пользователей:

![alt text](sources/images/image9.png)

Изменяем эту строчку, добавив путь до файла /etc/issue.net:

![alt text](sources/images/image10.png)

### Конфигурация ip туннель